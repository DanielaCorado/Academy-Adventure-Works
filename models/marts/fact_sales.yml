version: 2

models:
  - name: fact_sales
    description: This is the adventure works postgres database replica
    columns:
      - name: sale_sk
        description: Auto-incremental surrogate key.
        tests:
          - unique
          - not_null 

      - name: address_fk
        description: Foreign key from dim_address.
        tests:
          - not_null
          - relationships:
              to: ref('dim_address')
              field: address_sk

      - name: reason_fk
        description: Foreign key from dim_sales_reason.
        tests:
          - not_null
          - relationships:
              to: ref('dim_sales_reason')
              field: reason_sk

      - name: customer_fk
        description: Foreign key from dim_customers.
        tests:
          - not_null
          - relationships:
              to: ref('dim_customers')
              field: customer_sk

      - name: product_fk
        description: Foreign key from dim_products.
        tests:
          - not_null
          - relationships:
              to: ref('dim_products')
              field: product_sk

      - name: order_date
        description: Foreign key from dim_dates.
        tests:
          - not_null
          - relationships:
              to: ref('dim_dates')
              field: metric_date

      - name: sales_status
        description: Status of the order.

      - name: order_qty
        description: Quantity of the product bought.

      - name: unit_price
        description: Unit price of the product.

      - name: full_value
        description: Calculated total value of the order.

      - name: unit_price_discount
        description: Discount applied to the unit price.